 local BFSpell_d3a651bc7e8e1c712fd41cc5f72c50f8 = {}; local BFSpell_450db100a3de4b8647a5a780791f6c15 = {}; local BFSpell_7ebb2a9c27af423e4bc91ae902cd9978 = {}; local BFSpell_ddc6e88fb7febf4ea866e1871f20538e = nil; local _ BIGFOOT_SPELL_EVENT_NEW = "new spell"; if (GetLocale() == "zhCN") then BIGFOOT_SPELL_INSTANT_PATTERN = "<n>瞬发"; elseif (GetLocale() == "zhTW") then BIGFOOT_SPELL_INSTANT_PATTERN = "<n>立即施法"; else BIGFOOT_SPELL_INSTANT_PATTERN = "<n>Instant cast"; end local BFS_Eventer = BLibrary:CreateInstance("BEvent"); BFS_Eventer:Init{ name = "BigFoot", func = function() BFS_Eventer:RegisterEvent("LEARNED_SPELL_IN_TAB",BFSpell_3d3a115d8ba23ec9b6f17af3ba4b741d); BFS_Eventer:RegisterEvent("PLAYER_LOGIN"); end } function BFS_Eventer.PLAYER_LOGIN() BigFoot_DelayCall(BFSpell_f4c7fc1fa217c1077ef84a4b2968525c, 10); end function BFSpell_f4c7fc1fa217c1077ef84a4b2968525c() BFSpell_2ccbc822085094d9c5f108bb270981bd(); BFSpell_d3a651bc7e8e1c712fd41cc5f72c50f8 = BFSpell_450db100a3de4b8647a5a780791f6c15; BFSpell_ddc6e88fb7febf4ea866e1871f20538e = 1; end function BFSpell_2ccbc822085094d9c5f108bb270981bd() local BFSpell_3522d18be5a461cbdb52c559141f4a9a = GetNumSpellTabs(); local BFSpell_8983c60d66c8593ec7165ea9dbedb584, BFSpell_98b436aae97b9941de81152428c81208, BFSpell_602dceb5418dc9410df12b60b7a8437a; BFSpell_450db100a3de4b8647a5a780791f6c15 = {}; for BFSpell_e914904fab9d05d3f54d52bfc31a0f3f = 1, BFSpell_3522d18be5a461cbdb52c559141f4a9a do BFSpell_8983c60d66c8593ec7165ea9dbedb584, _, BFSpell_98b436aae97b9941de81152428c81208, BFSpell_602dceb5418dc9410df12b60b7a8437a = GetSpellTabInfo(BFSpell_e914904fab9d05d3f54d52bfc31a0f3f); for BFSpell_5e57ab95c762a48d9a126b104db1056f = 1, BFSpell_602dceb5418dc9410df12b60b7a8437a do local BFSpell_caa997efdeb36851b2f828f934939927, _,BFSpell_9248008bbb6d0ee7ce13f6ee45680051 = GetSpellInfo(BFSpell_98b436aae97b9941de81152428c81208 + BFSpell_5e57ab95c762a48d9a126b104db1056f, BOOKTYPE_SPELL); local BFSpell_575f486b35a698c76cedbb99b4c24d8e = IsPassiveSpell(BFSpell_98b436aae97b9941de81152428c81208 + BFSpell_5e57ab95c762a48d9a126b104db1056f, BOOKTYPE_SPELL); BigFoot_Tooltip_Init(); BigFootTooltip:SetSpellBookItem(BFSpell_98b436aae97b9941de81152428c81208 + BFSpell_5e57ab95c762a48d9a126b104db1056f, BOOKTYPE_SPELL) local BFSpell_e6955c64cf39bdb23dc86de1a9ec2117 = BigFoot_Tooltip_GetText(nil, ""); BigFootTooltip:Hide(); if BFSpell_caa997efdeb36851b2f828f934939927 then BFSpell_450db100a3de4b8647a5a780791f6c15[BFSpell_caa997efdeb36851b2f828f934939927] = {}; BFSpell_450db100a3de4b8647a5a780791f6c15[BFSpell_caa997efdeb36851b2f828f934939927]["name"] = BFSpell_caa997efdeb36851b2f828f934939927; BFSpell_450db100a3de4b8647a5a780791f6c15[BFSpell_caa997efdeb36851b2f828f934939927]["category"] = BFSpell_8983c60d66c8593ec7165ea9dbedb584; BFSpell_450db100a3de4b8647a5a780791f6c15[BFSpell_caa997efdeb36851b2f828f934939927]["texture"] = BFSpell_9248008bbb6d0ee7ce13f6ee45680051; BFSpell_450db100a3de4b8647a5a780791f6c15[BFSpell_caa997efdeb36851b2f828f934939927]["passive"] = BFSpell_575f486b35a698c76cedbb99b4c24d8e; BFSpell_450db100a3de4b8647a5a780791f6c15[BFSpell_caa997efdeb36851b2f828f934939927]["id"] = BFSpell_98b436aae97b9941de81152428c81208 + BFSpell_5e57ab95c762a48d9a126b104db1056f; BFSpell_450db100a3de4b8647a5a780791f6c15[BFSpell_caa997efdeb36851b2f828f934939927]["type"] = BOOKTYPE_SPELL; if (string.find(BFSpell_e6955c64cf39bdb23dc86de1a9ec2117, BIGFOOT_SPELL_INSTANT_PATTERN)) then BFSpell_450db100a3de4b8647a5a780791f6c15[BFSpell_caa997efdeb36851b2f828f934939927]["instant"] = 1; end BFSpell_450db100a3de4b8647a5a780791f6c15[BFSpell_caa997efdeb36851b2f828f934939927]["description"] = BFSpell_e6955c64cf39bdb23dc86de1a9ec2117; end end end end function BFSpell_3d3a115d8ba23ec9b6f17af3ba4b741d() if (not BFSpell_ddc6e88fb7febf4ea866e1871f20538e) then return; end BFSpell_2ccbc822085094d9c5f108bb270981bd(); local BFSpell_aa877706d5c90299af9a0d1327eb0bec = {}; for BFSpell_413bf9c15ce77baa8ebf1cda4cbf4887, BFSpell_2361bab8b48b1041ad740bb561b21aee in pairs(BFSpell_450db100a3de4b8647a5a780791f6c15) do if (not BFSpell_d3a651bc7e8e1c712fd41cc5f72c50f8[BFSpell_413bf9c15ce77baa8ebf1cda4cbf4887]) then BFSpell_aa877706d5c90299af9a0d1327eb0bec[BFSpell_413bf9c15ce77baa8ebf1cda4cbf4887] = BFSpell_2361bab8b48b1041ad740bb561b21aee; end end if (BFSpell_7ebb2a9c27af423e4bc91ae902cd9978[BIGFOOT_SPELL_EVENT_NEW]) then for BFSpell_413bf9c15ce77baa8ebf1cda4cbf4887, BFSpell_2361bab8b48b1041ad740bb561b21aee in pairs(BFSpell_aa877706d5c90299af9a0d1327eb0bec) do for BFSpell_08b8d54960760e15addd09345c991032, BFSpell_c31af5fd9021206e921af3d99e5a90af in pairs(BFSpell_7ebb2a9c27af423e4bc91ae902cd9978[BIGFOOT_SPELL_EVENT_NEW]) do BFSpell_c31af5fd9021206e921af3d99e5a90af(BFSpell_2361bab8b48b1041ad740bb561b21aee["id"], BFSpell_2361bab8b48b1041ad740bb561b21aee["name"], BFSpell_2361bab8b48b1041ad740bb561b21aee["category"], BFSpell_2361bab8b48b1041ad740bb561b21aee["type"], BFSpell_2361bab8b48b1041ad740bb561b21aee["texture"], BFSpell_2361bab8b48b1041ad740bb561b21aee["description"], BFSpell_2361bab8b48b1041ad740bb561b21aee["passive"], BFSpell_2361bab8b48b1041ad740bb561b21aee["instant"]); end end end BFSpell_d3a651bc7e8e1c712fd41cc5f72c50f8 = BFSpell_450db100a3de4b8647a5a780791f6c15; end function BigFootSpells_RegisterNewSpellSink(BFSpell_d0708241b607c9a9dd1953c812fadfb7, BFSpell_c31af5fd9021206e921af3d99e5a90af) local BFSpell_00878024a7892c3d77ff1d47e8c0abae = getglobal(BFSpell_c31af5fd9021206e921af3d99e5a90af); if (type(BFSpell_00878024a7892c3d77ff1d47e8c0abae) == "function") then if ( not BFSpell_7ebb2a9c27af423e4bc91ae902cd9978[BFSpell_d0708241b607c9a9dd1953c812fadfb7]) then BFSpell_7ebb2a9c27af423e4bc91ae902cd9978[BFSpell_d0708241b607c9a9dd1953c812fadfb7] = {}; end BFSpell_7ebb2a9c27af423e4bc91ae902cd9978[BFSpell_d0708241b607c9a9dd1953c812fadfb7][BFSpell_c31af5fd9021206e921af3d99e5a90af] = BFSpell_00878024a7892c3d77ff1d47e8c0abae; end end function BigFootSpells_UnregisterNewSpellSink(BFSpell_d0708241b607c9a9dd1953c812fadfb7, BFSpell_c31af5fd9021206e921af3d99e5a90af) if (BFSpell_7ebb2a9c27af423e4bc91ae902cd9978[BFSpell_d0708241b607c9a9dd1953c812fadfb7] and BFSpell_7ebb2a9c27af423e4bc91ae902cd9978[BFSpell_d0708241b607c9a9dd1953c812fadfb7][BFSpell_c31af5fd9021206e921af3d99e5a90af]) then BFSpell_7ebb2a9c27af423e4bc91ae902cd9978[BFSpell_d0708241b607c9a9dd1953c812fadfb7][BFSpell_c31af5fd9021206e921af3d99e5a90af] = nil; end end function BigFootSpell_GetSpellInfo(BFSpell_8983c60d66c8593ec7165ea9dbedb584) if (not BFSpell_ddc6e88fb7febf4ea866e1871f20538e) then return; end if (BFSpell_d3a651bc7e8e1c712fd41cc5f72c50f8[BFSpell_8983c60d66c8593ec7165ea9dbedb584]) then return BFSpell_d3a651bc7e8e1c712fd41cc5f72c50f8[BFSpell_8983c60d66c8593ec7165ea9dbedb584]["id"], BFSpell_d3a651bc7e8e1c712fd41cc5f72c50f8[BFSpell_8983c60d66c8593ec7165ea9dbedb584]["name"], BFSpell_d3a651bc7e8e1c712fd41cc5f72c50f8[BFSpell_8983c60d66c8593ec7165ea9dbedb584]["category"], BFSpell_d3a651bc7e8e1c712fd41cc5f72c50f8[BFSpell_8983c60d66c8593ec7165ea9dbedb584]["type"], BFSpell_d3a651bc7e8e1c712fd41cc5f72c50f8[BFSpell_8983c60d66c8593ec7165ea9dbedb584]["texture"], BFSpell_d3a651bc7e8e1c712fd41cc5f72c50f8[BFSpell_8983c60d66c8593ec7165ea9dbedb584]["description"], BFSpell_d3a651bc7e8e1c712fd41cc5f72c50f8[BFSpell_8983c60d66c8593ec7165ea9dbedb584]["passive"], BFSpell_d3a651bc7e8e1c712fd41cc5f72c50f8[BFSpell_8983c60d66c8593ec7165ea9dbedb584]["instant"]; end end 
